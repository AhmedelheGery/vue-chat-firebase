(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"3f3d":function(e,s,t){"use strict";var a=t("d3e8"),n=t.n(a);n.a},4830:function(e,s,t){"use strict";s["a"]={computed:{otherUserDetails(){return this.$store.state.auth.users&&this.$store.state.auth.users[this.$route.params.id]}}}},ab55:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{ref:"pageChat",staticClass:"flex column"},[e.otherUserDetails&&!e.otherUserDetails.online?t("q-banner",{staticClass:"bg-grey-2 text-center fixed-top chat-banner full-width",attrs:{"inline-actions":""}},[e._v("\n    "+e._s(e.otherUserDetails&&e.otherUserDetails.name)+" is offline.\n  ")]):e._e(),t("div",{staticClass:"q-pa-md column col justify-end chat-wrapper"},e._l(e.messages,(function(s,a){return t("q-chat-message",{key:a,attrs:{name:"me"==s.from?"":e.otherUserDetails&&e.otherUserDetails.name,text:[s.text],sent:"me"==s.from,"bg-color":"me"==s.from?"secondary":"grey-4","text-color":"me"==s.from?"white":"dark"}})})),1),t("q-footer",{attrs:{elevated:""}},[t("q-toolbar",{staticClass:"gradient-bg"},[t("q-form",{staticClass:"full-width",on:{submit:e.sendMessage}},[t("q-input",{ref:"newMessage",staticClass:"full-width",attrs:{outlined:"",label:"Message",dense:"","bg-color":"white",rounded:""},scopedSlots:e._u([{key:"before",fn:function(){},proxy:!0},{key:"after",fn:function(){return[t("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send",color:"white",type:"submit",disable:e.disableCheck},on:{click:e.sendMessage}})]},proxy:!0}]),model:{value:e.newMessage,callback:function(s){e.newMessage=s},expression:"newMessage"}})],1)],1)],1)],1)},n=[],r=(t("498a"),t("ded3")),o=t.n(r),i=t("2f62"),l=t("4830"),c={mixins:[l["a"]],data(){return{newMessage:""}},computed:o()(o()({},Object(i["d"])("auth",["messages","user","users"])),{},{userData(){return this.otherUserDetails},disableCheck(){return 0===this.newMessage.length||!this.newMessage.trim()}}),methods:o()(o()({},Object(i["b"])("auth",["getMessagesAction","leaveChatAction","sendMessageAction"])),{},{sendMessage(){this.sendMessageAction({message:{text:this.newMessage,from:"me"},otherUserId:this.$route.params.id}),this.newMessage="",this.$refs.newMessage.focus()},scrollToBottom(){let e=this.$refs.pageChat.$el;setTimeout((()=>{window.scrollTo(0,e.scrollHeight)}),20)}}),watch:{messages(e){Object.keys(e).length&&this.scrollToBottom()}},mounted(){this.getMessagesAction(this.$route.params.id)},destroyed(){this.leaveChatAction()}},u=c,h=(t("3f3d"),t("2877")),d=t("9989"),f=t("54e1"),g=t("8169"),m=t("7ff0"),b=t("65c6"),p=t("0378"),w=t("27f9"),M=t("9c40"),C=t("eebe"),x=t.n(C),y=Object(h["a"])(u,a,n,!1,null,"7a33997e",null);s["default"]=y.exports;x()(y,"components",{QPage:d["a"],QBanner:f["a"],QChatMessage:g["a"],QFooter:m["a"],QToolbar:b["a"],QForm:p["a"],QInput:w["a"],QBtn:M["a"]})},d3e8:function(e,s,t){}}]);